<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Tamil Nadu — Moksha Yatra (Sacred Atlas)</title>

<!-- Fonts + main Sacred Grandeur stylesheet (v4) -->
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">

<!-- Leaflet (maps) -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="" crossorigin=""/>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="" crossorigin=""></script>

<meta name="description" content="Tamil Nadu temple atlas — district-wise listings, temple details, and interactive maps.">
<style>
/* Page-specific adjustments (works with Sacred Grandeur v4 style.css) */
.container { max-width:1100px; margin:0 auto; padding:0 18px; }
.hero { height:38vh; display:flex; align-items:center; justify-content:center; text-align:center; position:relative; margin-top:64px; }
.hero .hero-bg { position:absolute; inset:0; background-image: linear-gradient(180deg, rgba(36,16,18,0.72), rgba(12,6,8,0.72)); z-index:0; }
.hero .hero-inner { position:relative; z-index:2; padding:28px; max-width:900px; }
.section-divider { text-align:center; font-size:20px; margin:18px 0; color:rgba(228,154,176,0.8); }
.district-section { margin:18px 0; border-radius:12px; overflow:hidden; border:1px solid rgba(255,255,255,0.04); background:linear-gradient(180deg, rgba(255,246,230,0.02), rgba(228,154,176,0.02)); }
.district-header { padding:12px 16px; display:flex; align-items:center; justify-content:space-between; gap:12px; cursor:pointer; background:linear-gradient(90deg, rgba(178,26,42,0.12), rgba(233,131,164,0.03)); }
.district-header h2 { margin:0; font-family:'Playfair Display',serif; color:var(--gold); font-size:1.05rem; }
.district-content { display:none; padding:16px; }
.district-banner { width:100%; height:160px; object-fit:cover; border-radius:10px; margin-bottom:12px; }
.temple-list { display:grid; grid-template-columns:repeat(auto-fit, minmax(280px,1fr)); gap:12px; }
.temple-card { background:var(--card-bg); border:1px solid rgba(212,163,74,0.06); border-radius:10px; padding:12px; box-shadow:var(--shadow); display:flex; flex-direction:column; }
.temple-card img { width:100%; height:140px; object-fit:cover; border-radius:8px; margin-bottom:8px; }
.temple-card h4 { margin:4px 0; font-family:'Playfair Display',serif; color:var(--gold); font-size:1rem; }
.temple-meta { font-size:0.88rem; color:var(--muted); margin-bottom:6px; }
.temple-text { color:var(--text); font-size:0.95rem; line-height:1.45; margin-bottom:8px; }
.temple-footer { display:flex; justify-content:space-between; align-items:center; gap:8px; }
.temple-tag { font-size:0.82rem; padding:6px 8px; border-radius:8px; background:linear-gradient(90deg,var(--accent-gold),var(--accent-red)); color:white; font-weight:600; }
.temple-map { height:320px; border-radius:10px; overflow:hidden; margin-top:12px; border:1px solid rgba(212,163,74,0.06); }
/* responsive */
@media (max-width:880px){ .hero{height:30vh}.district-banner{height:120px}.temple-card img{height:120px} .temple-map{height:240px} }
</style>
</head>
<body>

<!-- Navigation (assumes style.css v4 exists and styles .brand .nav-links) -->
<nav>
  <div class="brand">Moksha Yatra</div>
  <div class="nav-links">
    <a href="index.html">Home</a>
    <a href="tamilnadu.html" aria-current="page">Tamil Nadu</a>
    <a href="andhra.html">Andhra</a>
    <a href="karnataka.html">Karnataka</a>
    <a href="kerala.html">Kerala</a>
    <a href="divyadesam.html">Divya Desam</a>
  </div>
</nav>

<!-- Hero -->
<header class="hero" role="banner" aria-label="Tamil Nadu temples hero">
  <div class="hero-bg" style="background-image: url('images/brihadeeswarar_dusk.jpg'); opacity:0.45;"></div>
  <div class="container hero-inner">
    <h1 style="font-family:'Playfair Display', serif; color:var(--gold); font-size:2.1rem; margin-bottom:8px;">Tamil Nadu — Sacred Atlas</h1>
    <p style="color:var(--muted); max-width:820px; margin:0 auto;">District-wise temple corpora, curated lists, and interactive maps. Expand a district to reveal temples, stories, and the map with markers for planning circuits.</p>
  </div>
</header>

<main class="container" id="main">

  <!-- --- District sections: each follows same structure. Use your images in images/ folder --- -->

  <!-- Chennai -->
  <section class="district-section" id="district-chennai">
    <div class="district-header" onclick="toggleDistrict(this)">
      <h2>Chennai District</h2>
      <div style="font-size:0.9rem;color:var(--muted)">3 temples • map included</div>
    </div>
    <div class="district-content">
      <img class="district-banner" src="images/chennai_banner.jpg" alt="Chennai temples banner">
      <div class="temple-list">
        <div class="temple-card">
          <img src="images/kapaleeshwarar.jpg" alt="Kapaleeshwarar Temple">
          <h4>Kapaleeshwarar Temple</h4>
          <div class="temple-meta">Shiva — Padal Petra Sthalam</div>
          <div class="temple-text">Significance: Removes obstacles</div>
          <div class="temple-footer">
            <div class="temple-tag">Maha Shivaratri</div>
            <div style="font-size:0.82rem;color:var(--muted)">13.0409, 80.2663</div>
          </div>
        </div>

        <div class="temple-card">
          <img src="images/parthasarathy.jpg" alt="Parthasarathy Temple">
          <h4>Parthasarathy Temple</h4>
          <div class="temple-meta">Vishnu — Divya Desam</div>
          <div class="temple-text">Significance: Relief from doshas</div>
          <div class="temple-footer">
            <div class="temple-tag">Vaikunta Ekadasi</div>
            <div style="font-size:0.82rem;color:var(--muted)">13.0532, 80.2794</div>
          </div>
        </div>

        <div class="temple-card">
          <img src="images/ashtalakshmi.jpg" alt="Ashtalakshmi Temple">
          <h4>Ashtalakshmi Temple</h4>
          <div class="temple-meta">Devi — Shakti Peetham</div>
          <div class="temple-text">Significance: Wealth and prosperity</div>
          <div class="temple-footer">
            <div class="temple-tag">Navaratri</div>
            <div style="font-size:0.82rem;color:var(--muted)">13.0112, 80.2814</div>
          </div>
        </div>
      </div>

      <!-- Map for Chennai -->
      <div id="map-chennai" class="temple-map" aria-label="Chennai temple map"></div>
    </div>
  </section>

  <!-- Kanchipuram -->
  <section class="district-section" id="district-kanchipuram">
    <div class="district-header" onclick="toggleDistrict(this)">
      <h2>Kanchipuram District</h2>
      <div style="font-size:0.9rem;color:var(--muted)">3 temples • map included</div>
    </div>
    <div class="district-content">
      <img class="district-banner" src="images/kanchipuram_banner.jpg" alt="Kanchipuram banner">
      <div class="temple-list">
        <div class="temple-card">
          <img src="images/ekambareswarar.jpg" alt="Ekambareswarar Temple">
          <h4>Ekambareswarar Temple</h4>
          <div class="temple-meta">Shiva — Padal Petra Sthalam</div>
          <div class="temple-text">Significance: Health and longevity</div>
          <div class="temple-footer">
            <div class="temple-tag">Karthigai Deepam</div>
            <div style="font-size:0.82rem;color:var(--muted)">12.8310, 79.7068</div>
          </div>
        </div>

        <div class="temple-card">
          <img src="images/varadharaja.jpg" alt="Varadharaja Perumal">
          <h4>Varadharaja Perumal Temple</h4>
          <div class="temple-meta">Vishnu — Divya Desam</div>
          <div class="temple-text">Significance: Fertility and family welfare</div>
          <div class="temple-footer">
            <div class="temple-tag">Brahmotsavam</div>
            <div style="font-size:0.82rem;color:var(--muted)">12.8374, 79.7051</div>
          </div>
        </div>

        <div class="temple-card">
          <img src="images/kamakshi.jpg" alt="Kamakshi Amman Temple">
          <h4>Kamakshi Amman Temple</h4>
          <div class="temple-meta">Devi — Shakti Peetham</div>
          <div class="temple-text">Significance: Marriage harmony</div>
          <div class="temple-footer">
            <div class="temple-tag">Aadi Pooram</div>
            <div style="font-size:0.82rem;color:var(--muted)">12.8351, 79.7033</div>
          </div>
        </div>
      </div>

      <div id="map-kanchipuram" class="temple-map" aria-label="Kanchipuram temple map"></div>
    </div>
  </section>

  <!-- Madurai -->
  <section class="district-section" id="district-madurai">
    <div class="district-header" onclick="toggleDistrict(this)">
      <h2>Madurai District</h2>
      <div style="font-size:0.9rem;color:var(--muted)">2 temples • map included</div>
    </div>
    <div class="district-content">
      <img class="district-banner" src="images/madurai_banner.jpg" alt="Madurai banner">
      <div class="temple-list">
        <div class="temple-card">
          <img src="images/meenakshi.jpg" alt="Meenakshi Amman">
          <h4>Meenakshi Amman Temple</h4>
          <div class="temple-meta">Devi — Shakti Peetham</div>
          <div class="temple-text">Significance: Marriage and family blessings</div>
          <div class="temple-footer">
            <div class="temple-tag">Chithirai Festival</div>
            <div style="font-size:0.82rem;color:var(--muted)">9.9196, 78.1191</div>
          </div>
        </div>

        <div class="temple-card">
          <img src="images/thiruparankundram.jpg" alt="Thiruparankundram">
          <h4>Thiruparankundram Murugan Temple</h4>
          <div class="temple-meta">Murugan — Aru Padai Veedu</div>
          <div class="temple-text">Significance: Victory and courage</div>
          <div class="temple-footer">
            <div class="temple-tag">Skanda Sashti</div>
            <div style="font-size:0.82rem;color:var(--muted)">9.8876, 78.0984</div>
          </div>
        </div>
      </div>

      <div id="map-madurai" class="temple-map" aria-label="Madurai temple map"></div>
    </div>
  </section>

  <!-- Thanjavur -->
  <section class="district-section" id="district-thanjavur">
    <div class="district-header" onclick="toggleDistrict(this)">
      <h2>Thanjavur District</h2>
      <div style="font-size:0.9rem;color:var(--muted)">2 temples • map included</div>
    </div>
    <div class="district-content">
      <img class="district-banner" src="images/tanjore_banner.jpg" alt="Thanjavur banner">
      <div class="temple-list">
        <div class="temple-card">
          <img src="images/brihadeeswarar_dusk.jpg" alt="Brihadeeswarar">
          <h4>Brihadeeswarar Temple</h4>
          <div class="temple-meta">Shiva — Padal Petra Sthalam</div>
          <div class="temple-text">Significance: Spiritual power</div>
          <div class="temple-footer">
            <div class="temple-tag">Maha Shivaratri</div>
            <div style="font-size:0.82rem;color:var(--muted)">10.7820, 79.1310</div>
          </div>
        </div>

        <div class="temple-card">
          <img src="images/srirangam.jpg" alt="Srirangam">
          <h4>Srirangam Ranganathaswamy Temple</h4>
          <div class="temple-meta">Vishnu — Divya Desam</div>
          <div class="temple-text">Significance: Removes doshas</div>
          <div class="temple-footer">
            <div class="temple-tag">Vaikunta Ekadasi</div>
            <div style="font-size:0.82rem;color:var(--muted)">10.8700, 78.6946</div>
          </div>
        </div>
      </div>

      <div id="map-thanjavur" class="temple-map" aria-label="Thanjavur temple map"></div>
    </div>
  </section>

  <!-- Tirunelveli -->
  <section class="district-section" id="district-tirunelveli">
    <div class="district-header" onclick="toggleDistrict(this)">
      <h2>Tirunelveli District</h2>
      <div style="font-size:0.9rem;color:var(--muted)">2 temples • map included</div>
    </div>
    <div class="district-content">
      <img class="district-banner" src="images/tirunelveli_banner.jpg" alt="Tirunelveli banner">
      <div class="temple-list">
        <div class="temple-card">
          <img src="images/nellaiappar.jpg" alt="Nellaiappar Temple">
          <h4>Nellaiappar Temple</h4>
          <div class="temple-meta">Shiva — Padal Petra Sthalam</div>
          <div class="temple-text">Significance: Health and prosperity</div>
          <div class="temple-footer">
            <div class="temple-tag">Panguni Uthiram</div>
            <div style="font-size:0.82rem;color:var(--muted)">8.7139, 77.6926</div>
          </div>
        </div>

        <div class="temple-card">
          <img src="images/nava_tirupati.jpg" alt="Nava Tirupati">
          <h4>Nava Tirupati Temples</h4>
          <div class="temple-meta">Vishnu — Nava Tirupati</div>
          <div class="temple-text">Significance: Astrological remedies (cluster)</div>
          <div class="temple-footer">
            <div class="temple-tag">Various festivals</div>
            <div style="font-size:0.82rem;color:var(--muted)">8.7200, 77.7000</div>
          </div>
        </div>
      </div>

      <div id="map-tirunelveli" class="temple-map" aria-label="Tirunelveli temple map"></div>
    </div>
  </section>

  <!-- Dindigul -->
  <section class="district-section" id="district-dindigul">
    <div class="district-header" onclick="toggleDistrict(this)">
      <h2>Dindigul District</h2>
      <div style="font-size:0.9rem;color:var(--muted)">1 temple • map included</div>
    </div>
    <div class="district-content">
      <img class="district-banner" src="images/palani_banner.jpg" alt="Palani banner">
      <div class="temple-list">
        <div class="temple-card">
          <img src="images/palani.jpg" alt="Palani Murugan">
          <h4>Palani Murugan Temple</h4>
          <div class="temple-meta">Murugan — Aru Padai Veedu</div>
          <div class="temple-text">Significance: Relief from Rahu dosha</div>
          <div class="temple-footer">
            <div class="temple-tag">Thaipusam</div>
            <div style="font-size:0.82rem;color:var(--muted)">10.4500, 77.5200</div>
          </div>
        </div>
      </div>

      <div id="map-dindigul" class="temple-map" aria-label="Dindigul temple map"></div>
    </div>
  </section>

  <!-- Kumbakonam -->
  <section class="district-section" id="district-kumbakonam">
    <div class="district-header" onclick="toggleDistrict(this)">
      <h2>Kumbakonam District</h2>
      <div style="font-size:0.9rem;color:var(--muted)">2 temples • map included</div>
    </div>
    <div class="district-content">
      <img class="district-banner" src="images/kumbakonam_banner.jpg" alt="Kumbakonam banner">
      <div class="temple-list">
        <div class="temple-card">
          <img src="images/sarangapani.jpg" alt="Sarangapani Temple">
          <h4>Sarangapani Temple</h4>
          <div class="temple-meta">Vishnu — Divya Desam</div>
          <div class="temple-text">Significance: Spiritual upliftment</div>
          <div class="temple-footer">
            <div class="temple-tag">Chitra Pournami</div>
            <div style="font-size:0.82rem;color:var(--muted)">10.9601, 79.3632</div>
          </div>
        </div>

        <div class="temple-card">
          <img src="images/nageswaran.jpg" alt="Nageswaran Temple">
          <h4>Nageswaran Temple</h4>
          <div class="temple-meta">Shiva — Padal Petra Sthalam</div>
          <div class="temple-text">Significance: Removes Sarpa Dosha</div>
          <div class="temple-footer">
            <div class="temple-tag">Maha Shivaratri</div>
            <div style="font-size:0.82rem;color:var(--muted)">10.9623, 79.3644</div>
          </div>
        </div>
      </div>

      <div id="map-kumbakonam" class="temple-map" aria-label="Kumbakonam temple map"></div>
    </div>
  </section>

  <!-- Kanyakumari -->
  <section class="district-section" id="district-kanyakumari">
    <div class="district-header" onclick="toggleDistrict(this)">
      <h2>Kanyakumari District</h2>
      <div style="font-size:0.9rem;color:var(--muted)">1 temple • map included</div>
    </div>
    <div class="district-content">
      <img class="district-banner" src="images/kanyakumari_banner.jpg" alt="Kanyakumari banner">
      <div class="temple-list">
        <div class="temple-card">
          <img src="images/kumari_amman.jpg" alt="Kumari Amman">
          <h4>Kumari Amman Temple</h4>
          <div class="temple-meta">Devi — Shakti Peetham</div>
          <div class="temple-text">Significance: Fertility and well-being</div>
          <div class="temple-footer">
            <div class="temple-tag">Navaratri</div>
            <div style="font-size:0.82rem;color:var(--muted)">8.0800, 77.5600</div>
          </div>
        </div>
      </div>

      <div id="map-kanyakumari" class="temple-map" aria-label="Kanyakumari temple map"></div>
    </div>
  </section>

  <!-- Nagapattinam -->
  <section class="district-section" id="district-nagapattinam">
    <div class="district-header" onclick="toggleDistrict(this)">
      <h2>Nagapattinam District</h2>
      <div style="font-size:0.9rem;color:var(--muted)">1 temple • map included</div>
    </div>
    <div class="district-content">
      <img class="district-banner" src="images/nagapattinam_banner.jpg" alt="Nagapattinam banner">
      <div class="temple-list">
        <div class="temple-card">
          <img src="images/soundararaja.jpg" alt="Soundararajaperumal">
          <h4>Soundararajaperumal Temple</h4>
          <div class="temple-meta">Vishnu — Divya Desam candidate</div>
          <div class="temple-text">Significance: Protection from evil</div>
          <div class="temple-footer">
            <div class="temple-tag">Brahmotsavam</div>
            <div style="font-size:0.82rem;color:var(--muted)">10.7653, 79.8445</div>
          </div>
        </div>
      </div>

      <div id="map-nagapattinam" class="temple-map" aria-label="Nagapattinam temple map"></div>
    </div>
  </section>

<!-- === Sacred Circuits & Pilgrimage Stories === -->
<section id="circuits" class="vertical-circuits">
  <h2>🪷 Sacred Circuits of Tamil Nadu</h2>
  <p>Plan your journey through temple clusters that can be comfortably covered together.</p>

  <div class="circuit">
    <img src="images/trichy_tanjore_circuit.jpg" alt="Trichy Thanjavur Circuit">
    <div class="circuit-info">
      <h3>Trichy – Thanjavur Heritage Trail</h3>
      <p>Visit Srirangam, Brihadeeswarar, and Gangaikonda Cholapuram in 2 days.</p>
      <button>🧭 View Route</button>
      <button>📜 Read Story</button>
    </div>
  </div>

  <div class="circuit">
    <img src="images/madurai_arupadai.jpg" alt="Madurai Murugan Circuit">
    <div class="circuit-info">
      <h3>Madurai – Arupadai Veedu Circuit</h3>
      <p>Pilgrimage through the six abodes of Lord Murugan across Tamil Nadu.</p>
      <button>🧭 View Route</button>
      <button>📜 Read Story</button>
    </div>
  </div>

  <div class="circuit">
    <img src="images/navagraha_circuit.jpg" alt="Navagraha Temples">
    <div class="circuit-info">
      <h3>Kumbakonam Navagraha Circuit</h3>
      <p>All nine planet shrines within a 30 km radius – ideal for weekend pilgrims.</p>
      <button>🧭 View Route</button>
      <button>📜 Read Story</button>
    </div>
  </div>

  <div class="circuit">
    <img src="images/tirunelveli_navatirupati.jpg" alt="Nava Tirupati Circuit">
    <div class="circuit-info">
      <h3>Tirunelveli – Nava Tirupati Circuit</h3>
      <p>Nine Vishnu shrines along the Tamirabarani – each linked to a planet and virtue.</p>
      <button>🧭 View Route</button>
      <button>📜 Read Story</button>
    </div>
  </div>
</section>

<!-- === Pilgrimage Packages === -->
<section id="packages" class="travel-packages">
  <h2>🛕 Pilgrimage Packages</h2>
  <div class="package"><h3>2-Day Heritage Trail</h3><p>Chennai → Kanchipuram → Thanjavur</p></div>
  <div class="package"><h3>4-Day Murugan Circuit</h3><p>Palani → Thiruchendur → Swamimalai → Thiruparamkundram</p></div>
  <div class="package"><h3>5-Day Divya Desam Journey</h3><p>Kumbakonam → Srirangam → Tirunelveli → Madurai</p></div>
</section>

<!-- === Devotional Stories === -->
<section id="stories" class="devotional-stories">
  <h2>📜 Stories & Legends</h2>
  <div class="story-carousel">
    <div class="story-card"><img src="images/ganesha_story.jpg" alt="Ganesha Story"><p>When Ganesha circled His parents and won the world.</p></div>
    <div class="story-card"><img src="images/shiva_dance.jpg" alt="Nataraja Story"><p>The cosmic dance of Nataraja at Chidambaram.</p></div>
    <div class="story-card"><img src="images/vishnu_story.jpg" alt="Vishnu Story"><p>Vishnu’s Vamana avatar and the humbling of Mahabali.</p></div>
    <div class="story-card"><img src="images/narada_story.jpg" alt="Narada Story"><p>Narada’s song that taught the devas humility.</p></div>
  </div>
</section>

  
</main>

<footer style="margin-top:28px;">
  <div class="container">
    <p style="margin:8px 0;color:var(--muted)">© 2025 Moksha Yatra — Sacred Grandeur • Tamil Nadu Atlas</p>
  </div>
</footer>

<!-- Mapping & Interaction Script -->
<script>
/* District temple data (from your CSV) */
const templeData = {
  chennai: [
    {name:"Kapaleeshwarar Temple", lat:13.0409, lon:80.2663, deity:"Shiva", category:"Padal Petra Sthalam", festival:"Maha Shivaratri"},
    {name:"Parthasarathy Temple", lat:13.0532, lon:80.2794, deity:"Vishnu", category:"Divya Desam", festival:"Vaikunta Ekadasi"},
    {name:"Ashtalakshmi Temple", lat:13.0112, lon:80.2814, deity:"Devi", category:"Shakti Peetham", festival:"Navaratri"}
  ],
  kanchipuram: [
    {name:"Ekambareswarar Temple", lat:12.8310, lon:79.7068, deity:"Shiva", category:"Padal Petra Sthalam", festival:"Karthigai Deepam"},
    {name:"Varadharaja Perumal Temple", lat:12.8374, lon:79.7051, deity:"Vishnu", category:"Divya Desam", festival:"Brahmotsavam"},
    {name:"Kamakshi Amman Temple", lat:12.8351, lon:79.7033, deity:"Devi", category:"Shakti Peetham", festival:"Aadi Pooram"}
  ],
  madurai: [
    {name:"Meenakshi Amman Temple", lat:9.9196, lon:78.1191, deity:"Devi", category:"Shakti Peetham", festival:"Chithirai Festival"},
    {name:"Thiruparankundram Murugan Temple", lat:9.8876, lon:78.0984, deity:"Murugan", category:"Aru Padai Veedu", festival:"Skanda Sashti"}
  ],
  thanjavur: [
    {name:"Brihadeeswarar Temple", lat:10.7820, lon:79.1310, deity:"Shiva", category:"Padal Petra Sthalam", festival:"Maha Shivaratri"},
    {name:"Srirangam Ranganathaswamy Temple", lat:10.8700, lon:78.6946, deity:"Vishnu", category:"Divya Desam", festival:"Vaikunta Ekadasi"}
  ],
  tirunelveli: [
    {name:"Nellaiappar Temple", lat:8.7139, lon:77.6926, deity:"Shiva", category:"Padal Petra Sthalam", festival:"Panguni Uthiram"},
    {name:"Nava Tirupati Temples (cluster)", lat:8.7200, lon:77.7000, deity:"Vishnu", category:"Nava Tirupati", festival:"Various"}
  ],
  dindigul: [
    {name:"Palani Murugan Temple", lat:10.4500, lon:77.5200, deity:"Murugan", category:"Aru Padai Veedu", festival:"Thaipusam"}
  ],
  kumbakonam: [
    {name:"Sarangapani Temple", lat:10.9601, lon:79.3632, deity:"Vishnu", category:"Divya Desam", festival:"Chitra Pournami"},
    {name:"Nageswaran Temple", lat:10.9623, lon:79.3644, deity:"Shiva", category:"Padal Petra Sthalam", festival:"Maha Shivaratri"}
  ],
  kanyakumari: [
    {name:"Kumari Amman Temple", lat:8.0800, lon:77.5600, deity:"Devi", category:"Shakti Peetham", festival:"Navaratri"}
  ],
  nagapattinam: [
    {name:"Soundararajaperumal Temple", lat:10.7653, lon:79.8445, deity:"Vishnu", category:"Divya Desam candidate", festival:"Brahmotsavam"}
  ]
};

/* map storage */
const maps = {};

/* helper to create map when visible */
function createTempleMap(containerId, data) {
  if(!data || data.length===0) return null;
  if(maps[containerId]) return maps[containerId]; // already created

  const centerLat = data[0].lat, centerLon = data[0].lon;
  const map = L.map(containerId, { scrollWheelZoom:false, zoomControl:true }).setView([centerLat, centerLon], 9);

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '© OpenStreetMap contributors'
  }).addTo(map);

  // custom rose marker (simple colored icon)
  const markerHtml = '<svg xmlns="http://www.w3.org/2000/svg" width="26" height="34" viewBox="0 0 24 24"><path fill="%23e49ab0" d="M12 2C8.1 2 5 5.1 5 9c0 5.3 7 13 7 13s7-7.7 7-13c0-3.9-3.1-7-7-7z"/></svg>';
  const svgIcon = L.divIcon({
    className: '',
    html: markerHtml,
    iconSize: [26,34],
    iconAnchor: [13,34],
    popupAnchor: [0,-34]
  });

  data.forEach(t => {
    const m = L.marker([t.lat, t.lon], { icon: svgIcon }).addTo(map);
    const popupHtml = `<strong>${t.name}</strong><br>${t.deity} · ${t.category}<br><em>${t.festival}</em>`;
    m.bindPopup(popupHtml);
  });

  maps[containerId] = map;
  return map;
}

/* toggle district content; when opening, create map if not created */
function toggleDistrict(el) {
  const content = el.nextElementSibling;
  // close others
  document.querySelectorAll('.district-content').forEach(c => {
    if(c !== content) c.style.display = 'none';
  });
  // toggle this one
  const willOpen = content.style.display !== 'block';
  content.style.display = willOpen ? 'block' : 'none';

  if(willOpen) {
    // small timeout to allow layout to settle (map requires visible container)
    setTimeout(() => {
      // map id mapping by section
      const section = el.parentElement;
      const id = section.id || '';
      if(id === 'district-chennai') { createTempleMap('map-chennai', templeData.chennai); if(maps['map-chennai']) maps['map-chennai'].invalidateSize(); }
      if(id === 'district-kanchipuram') { createTempleMap('map-kanchipuram', templeData.kanchipuram); if(maps['map-kanchipuram']) maps['map-kanchipuram'].invalidateSize(); }
      if(id === 'district-madurai') { createTempleMap('map-madurai', templeData.madurai); if(maps['map-madurai']) maps['map-madurai'].invalidateSize(); }
      if(id === 'district-thanjavur') { createTempleMap('map-thanjavur', templeData.thanjavur); if(maps['map-thanjavur']) maps['map-thanjavur'].invalidateSize(); }
      if(id === 'district-tirunelveli') { createTempleMap('map-tirunelveli', templeData.tirunelveli); if(maps['map-tirunelveli']) maps['map-tirunelveli'].invalidateSize(); }
      if(id === 'district-dindigul') { createTempleMap('map-dindigul', templeData.dindigul); if(maps['map-dindigul']) maps['map-dindigul'].invalidateSize(); }
      if(id === 'district-kumbakonam') { createTempleMap('map-kumbakonam', templeData.kumbakonam); if(maps['map-kumbakonam']) maps['map-kumbakonam'].invalidateSize(); }
      if(id === 'district-kanyakumari') { createTempleMap('map-kanyakumari', templeData.kanyakumari); if(maps['map-kanyakumari']) maps['map-kanyakumari'].invalidateSize(); }
      if(id === 'district-nagapattinam') { createTempleMap('map-nagapattinam', templeData.nagapattinam); if(maps['map-nagapattinam']) maps['map-nagapattinam'].invalidateSize(); }
    }, 280);
    // scroll into view a little for UX
    el.scrollIntoView({behavior:'smooth', block:'start'});
  }
}

/* graceful fallback: if JS disabled, show all district contents */
document.addEventListener('DOMContentLoaded', () => {
  // Optionally open the first district by default
  const first = document.querySelector('.district-section');
  if(first) {
    const header = first.querySelector('.district-header');
    if(header) header.click();
  }
});
</script>

</body>
</html>
